/* ===== base ===== */
.psel-anchor { position: relative; width: 100%; }
.psel-input { display:flex; align-items:center; gap:8px; border:1px solid #e5e7eb; border-radius:10px; padding:8px 10px; background:#fff; cursor:text; }
.psel-input input { flex:1; border:0; outline:none; font-size:14px; }
.psel-icon { opacity:.6; }

.psel-menu {
  z-index: 10000;
  background: #fff;
  border: 1px solid #e6ebf1;
  border-radius: 12px;
  box-shadow: 0 18px 36px rgba(16,24,40,.14);
  overflow: hidden;
}

/* overlay hidden by default on desktop */
.psel-overlay { display: none; }

.psel-search { padding: 8px; border-bottom:1px solid #eef2f6; }
.psel-search input { width:100%; border:1px solid #e5e7eb; border-radius:8px; padding:8px 10px; outline:none; }
.psel-list { max-height: 280px; overflow:auto; padding:6px; }
.psel-empty { padding:14px; text-align:center; color:#64748b; }

.psel-item { display:flex; gap:10px; padding:8px; border-radius:10px; cursor:pointer; align-items:center; }
.psel-item:hover, .psel-item.is-active { background:#f5f8ff; }
.psel-thumb { width:36px; height:36px; border-radius:8px; overflow:hidden; border:1px solid #eef1f5; display:flex; align-items:center; justify-content:center; background:#fafafa; }
.psel-thumb img { width:100%; height:100%; object-fit:cover; }
.psel-info { min-width:0; }
.psel-name { font-weight:600; font-size:14px; color:#111827; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
.psel-sub { font-size:12px; color:#6b7280; }

.psel-chip {
  display:block; align-items:center; justify-content:space-between;
  gap:10px; border:1px solid #e5e7eb; border-radius:12px; padding:8px 10px; background:#fff;
}
.psel-chip-left { display:flex; gap:10px; align-items:center; min-width:0; }
.psel-chip .psel-thumb { width:40px; height:40px; }
.psel-chip .psel-name { font-weight:700; }
.psel-chip .psel-sub { color:#6b7280; font-size:12px; }
.psel-chip-actions { display:flex; gap:8px; }
.psel-btn { border:1px solid #e5e7eb; background:#f8fafc; border-radius:8px; padding:6px 10px; cursor:pointer; }
.psel-btn:hover { background:#eef2f7; }
.psel-btn.danger { border-color:#fecaca; background:#fff1f2; color:#b91c1c; }

.link-btn {
  background: transparent;
  border: none;
  padding: 0;
  font-size: 12px;
  cursor: pointer;
  color: #2563eb;
}
.link-btn:hover { text-decoration: underline; }

/* ===== mobile bottom sheet ===== */
@media (max-width: 768px) {
  .psel-root[data-open="true"] .psel-overlay {
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,.45);
    z-index: 9998;
    display: block;
  }

  .psel-menu {
    /* turn into bottom sheet */
    position: fixed !important;
    left: 0 !important;
    right: 0 !important;
    bottom: 0 !important;
    top: auto !important;

    max-height: min(75vh, 600px);
    width: 100% !important;
    border: 0;
    border-radius: 14px 14px 0 0;
    box-shadow: 0 -12px 28px rgba(16,24,40,.16);
    z-index: 9999;
    padding-bottom: env(safe-area-inset-bottom, 12px);
  }

  .psel-grabber {
    width: 48px; height: 5px; border-radius: 999px; margin: 8px auto 6px;
    background: #e5e7eb;
  }

  .psel-search {
    position: sticky; top: 0; z-index: 1;
    padding: 12px;
    background: #fff;
    border-bottom: none;  
}
  .psel-search input {
    padding: 10px 12px;
    border-radius: 10px;
    font-size: 16px;
    width:93%;
  }

  .psel-list {
    margin-left:15px;
    margin-right:15px;
    max-height: none;
    height: calc(min(75vh, 600px) - 64px - 48px);
    overflow: auto;
  }

  .psel-item { padding: 12px; border-radius: 12px; }
  .psel-thumb { width: 48px; height: 48px; }
  .psel-name { font-size: 15px; }
  .psel-sub { font-size: 13px; }

  .psel-footer {
    position: sticky; bottom: 0;
    padding: 10px 12px calc(env(safe-area-inset-bottom, 0) + 8px);
    background: #fff;
    border-top: 1px solid #eef2f6;
  }
  .psel-close-btn {
    width: 100%; height: 40px;
    border-radius: 10px; border: 1px solid #e6ebf1;
    background: #f8fafc; font-weight: 600;
  }
}

.link-btn {
  background: transparent;
  border: none;
  padding: 0;
  font-size: 12px;
  cursor: pointer;
  color: #2563eb;
}
.link-btn:hover { text-decoration: underline; }