:root{
  --sb-width:260px;
  --sb-collapsed:78px;
  --sb-bg:#fff;
  --sb-border:#e4e7eb;
  --sb-hover:#f5f7fa;
  --sb-active:#1767e6;
  --sb-active-bg:#e8f0fe;
  --sb-shadow:0 4px 20px rgba(0,0,0,0.06);
  --sb-z:910;
  --sb-text:#1f2937;
  --sb-muted:#6b7280;
}

/* Shell */
.modern-sidebar{
  position:fixed; top:0; left:0;
  width:var(--sb-width); height:100vh;
  background:var(--sb-bg);
  /* border-right:1px solid var(--sb-border); */
  display:flex; flex-direction:column;
  transition:width .25s ease;
  z-index:var(--sb-z);
  overflow-y:auto; overflow-x:hidden;
  scrollbar-width:thin;
  scrollbar-color:#cfd6df transparent;
}
.modern-sidebar.collapsed{ width:var(--sb-collapsed); }

/* Top strip */
.sidebar-top{
  position:sticky; top:0; z-index:2;
  display:flex; align-items:center; justify-content:center;
  padding:10px 12px;
  background:var(--sb-bg);
    height: 70px;
}
.sidebar-brand{ display:flex; align-items:center; cursor:pointer; }
.sidebar-brand img{
  width:100px; height:100px; object-fit:contain;
}
.sidebar-brand img:hover{ transform:scale(1.04); }
.modern-sidebar.collapsed .sidebar-brand img{ width:42px; }

/* Menu container */
.sidebar-menu{
  flex:1; padding:8px 0 16px;
  display:flex; flex-direction:column; gap:6px;
}

/* Group */
/* ---------- Expand / Collapse animation ---------- */
.sidebar-group .group-body {
  max-height: 0;
  overflow: hidden;
  opacity: 0;
  transform: translateY(-4px);
  transition: all 0.25s ease;
}

/* When open */
.sidebar-group[data-open="true"] .group-body {
  max-height: 500px; /* large enough to fit all sublinks */
  opacity: 1;
  transform: translateY(0);
}

.group-header{
  /* reset */
  -webkit-appearance:none; appearance:none;
  border:none; background:transparent;
  font:inherit; color:var(--sb-text);
  /* layout */
  width:100%; text-align:left; cursor:pointer;
  display:flex; align-items:center; gap:12px;
  padding:10px 14px;
  border-radius:10px;
  transition:background-color .15s ease, color .15s ease;
}
.group-header:hover{ background:var(--sb-hover); }
.group-header:focus-visible{
  outline:2px solid var(--sb-active);
  outline-offset:2px;
}
.group-header .icon{
  font-size:19px; min-width:22px; text-align:center;
}
.group-title{ font-weight:700; font-size:14.5px; }
.chev{ margin-left:auto; opacity:.6; transition:transform .2s ease; }
[data-open="true"] .chev{ transform:rotate(180deg); }

/* Body (sub-links) */
.group-body{
  display:grid; gap:4px;
  padding:4px 0 8px 44px; /* indent under the icon line */
}

/* Links */
.sidebar-link{
  display:flex; align-items:center; gap:10px;
  padding:8px 12px; margin:0 10px 0 6px;
  color:var(--sb-text); text-decoration:none;
  font-size:14.5px; font-weight:500;
  border-radius:10px; transition:background-color .15s ease, color .15s ease;
}
.sidebar-link:hover{ background:var(--sb-hover); }
.sidebar-link.active{ background:var(--sb-active-bg); color:var(--sb-active); font-weight:600; }
.sidebar-link .icon{ font-size:18px; min-width:22px; text-align:center; }
.sidebar-link .label{ white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }

/* Collapsed mode */
.modern-sidebar.collapsed .group-header .group-title,
.modern-sidebar.collapsed .group-header .chev,
.modern-sidebar.collapsed .group-body,
.modern-sidebar.collapsed .sidebar-link .label{
  display:none;
}
.modern-sidebar.collapsed .group-header,
.modern-sidebar.collapsed .sidebar-link{
  justify-content:center; padding:10px 0; 
}
.modern-sidebar.collapsed .group-header .icon,
.modern-sidebar.collapsed .sidebar-link .icon{
  width:44px; height:44px; display:grid; place-items:center;
  border-radius:10px; background:transparent;
  transition:background-color .15s ease;
}
.modern-sidebar.collapsed .group-header:hover .icon,
.modern-sidebar.collapsed .sidebar-link:hover .icon{
  background:var(--sb-hover);
}

/* Tooltips (collapsed) */
.modern-sidebar.collapsed .group-header[title]:hover::after,
.modern-sidebar.collapsed .sidebar-link[title]:hover::after{
  content:attr(title);
  position:absolute; left:calc(var(--sb-collapsed) + 10px); top:50%;
  transform:translateY(-50%);
  background:#111827; color:#fff; padding:6px 10px; border-radius:8px;
  font-size:12.5px; white-space:nowrap; box-shadow:0 2px 10px rgba(0,0,0,.15);
}

/* Desktop rail + floating toggle */
.sidebar-rail{
  position:fixed; top:0; left:var(--sb-width);
  width:1px; height:100vh; 
  z-index:900; transition:left .25s ease;
}
.sidebar-rail.collapsed{ left:var(--sb-collapsed); }

.sidebar-rail-toggle {
  position: fixed;
  top: 90px;
  transform: translateY(-50%);
  left: calc(var(--sb-width) - 20px);
  width: 40px;
  height: 40px;
  border-radius: 20px;
  border: 1px solid var(--sb-border);
  background: #fff;
  box-shadow: var(--sb-shadow);
  display: grid;
  place-items: center;
  cursor: pointer;
  z-index: 999;
  transition: left .25s 
ease, background-color .15s 
ease;
}
.sidebar-rail-toggle:hover{ background:var(--sb-hover); }
.sidebar-rail-toggle .rail-caret{ font-size:18px; line-height:1; color:#6b7280; }
.sidebar-rail-toggle.collapsed{ 
  left:calc(var(--sb-collapsed) - 20px); 
}

/* Mobile */
@media (max-width:768px){
  .sidebar-rail, .sidebar-rail-toggle{ display:none; }
  .modern-sidebar{ transform:translateX(-100%); transition:transform .25s ease; width:var(--sb-width); }
  .modern-sidebar:not(.collapsed){ transform:translateX(0); }
  .mobile-sidebar-overlay{
    position:fixed; inset:0; background:rgba(0,0,0,.35); backdrop-filter:blur(3px);
    z-index:909; display:none;
  }
  .mobile-sidebar-overlay.active{ display:block; }
  body.no-scroll{ overflow:hidden; }
}